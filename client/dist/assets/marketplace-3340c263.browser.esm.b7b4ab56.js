import{_ as a,aK as A,cR as E,dE as C,aQ as u,B as f,dV as I}from"./index.0708ba85.js";import{I as T,c as y,D as w}from"./QueryParams-8a30379b.browser.esm.793fc6ad.js";async function h(e,i,t,s,d){try{const l=(await a(()=>import("./IERC165.4b3b20df.js"),[])).default,c=new A(t,l,e),[p,v]=await Promise.all([c.supportsInterface(T),c.supportsInterface(y)]);if(p){const r=(await a(()=>import("./index.0708ba85.js").then(R=>R.fs),["assets/index.0708ba85.js","assets/index.63cb93ae.css"])).default,n=new A(t,r,e);if(await n.isApprovedForAll(d,i))return!0;let o;try{o=await n.getApproved(s)}catch{}return(o==null?void 0:o.toLowerCase())===i.toLowerCase()}else if(v){const r=(await a(()=>import("./index.0708ba85.js").then(_=>_.fu),["assets/index.0708ba85.js","assets/index.63cb93ae.css"])).default;return await new A(t,r,e).isApprovedForAll(d,i)}else return console.error("Contract does not implement ERC 1155 or ERC 721."),!1}catch(l){return console.error("Failed to check if token is approved",l),!1}}async function L(e,i,t,s,d){const l=(await a(()=>import("./IERC165.4b3b20df.js"),[])).default,c=new E(e.getSignerOrProvider(),t,l,e.options,e.storage),[p,v]=await Promise.all([c.read("supportsInterface",[T]),c.read("supportsInterface",[y])]);if(p){const r=(await a(()=>import("./index.0708ba85.js").then(o=>o.fs),["assets/index.0708ba85.js","assets/index.63cb93ae.css"])).default,n=new E(e.getSignerOrProvider(),t,r,e.options,e.storage);await n.read("isApprovedForAll",[d,i])||(await n.read("getApproved",[s])).toLowerCase()===i.toLowerCase()||await n.sendTransaction("setApprovalForAll",[i,!0])}else if(v){const r=(await a(()=>import("./index.0708ba85.js").then(o=>o.fu),["assets/index.0708ba85.js","assets/index.63cb93ae.css"])).default,n=new E(e.getSignerOrProvider(),t,r,e.options,e.storage);await n.read("isApprovedForAll",[d,i])||await n.sendTransaction("setApprovalForAll",[i,!0])}else throw Error("Contract must implement ERC 1155 or ERC 721.")}function q(e){switch(u(e.assetContractAddress!==void 0&&e.assetContractAddress!==null,"Asset contract address is required"),u(e.buyoutPricePerToken!==void 0&&e.buyoutPricePerToken!==null,"Buyout price is required"),u(e.listingDurationInSeconds!==void 0&&e.listingDurationInSeconds!==null,"Listing duration is required"),u(e.startTimestamp!==void 0&&e.startTimestamp!==null,"Start time is required"),u(e.tokenId!==void 0&&e.tokenId!==null,"Token ID is required"),u(e.quantity!==void 0&&e.quantity!==null,"Quantity is required"),e.type){case"NewAuctionListing":u(e.reservePricePerToken!==void 0&&e.reservePricePerToken!==null,"Reserve price is required")}}async function m(e,i,t){return{quantity:t.quantityDesired,pricePerToken:t.pricePerToken,currencyContractAddress:t.currency,buyerAddress:t.offeror,quantityDesired:t.quantityWanted,currencyValue:await C(e,t.currency,t.quantityWanted.mul(t.pricePerToken)),listingId:i}}function D(e,i,t){return t=f.from(t),e=f.from(e),i=f.from(i),e.eq(f.from(0))?!1:i.sub(e).mul(I).div(e).gte(t)}async function b(e,i,t){const s=[];for(;i-e>w;)s.push(t(e,e+w-1)),e+=w;return s.push(t(e,i-1)),await Promise.all(s)}export{D as a,b as g,L as h,h as i,m,q as v};
